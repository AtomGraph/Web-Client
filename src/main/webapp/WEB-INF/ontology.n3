@base <http://graphity.org/ontology/> .

@prefix : <> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix dc: <http://purl.org/dc/elements/1.1/> .
@prefix sioc: <http://rdfs.org/sioc/ns#> .
@prefix sp: <http://spinrdf.org/sp#> .

: a owl:Ontology ;
    dc:title "Graphity ontology" ;
    rdfs:seeAlso <http://graphity.org> .

:Container a owl:Class ;
    rdfs:isDefinedBy : ;
    rdfs:subClassOf sioc:Container ,
    [
	a owl:Restriction;
	owl:onProperty :query;
	owl:hasValue :ConstructLatest
    ] .

:query a owl:ObjectProperty ;
    rdfs:isDefinedBy : ;
    rdfs:range sp:Query .

:ConstructLatest    a       sp:Construct ;
    rdfs:isDefinedBy : ;
    sp:templates ([ sp:object _:object ;
                  sp:predicate _:property ;
                  sp:subject _:subject
                ]) ;
      sp:where ([ a       sp:SubQuery ;
                  sp:query
                          [ a       sp:Select ;
                            sp:limit "10"^^xsd:long ;
                            sp:where ([ a       sp:NamedGraph ;
                                        sp:elements ([ sp:object _:object ;
                                                    sp:predicate _:property ;
                                                    sp:subject _:subject
                                                  ]) ;
                                        sp:graphNameNode
                                                [ sp:varName "graph"^^xsd:string
                                                ]
                                      ])
                          ]
                ]) .
_:subject  sp:varName "uri"^^xsd:string .
_:property  sp:varName "property"^^xsd:string .
_:object  sp:varName "object"^^xsd:string .